document.addEventListener("DOMContentLoaded", () => {
  const forgotPassButton = document.getElementById("forgotPassButton");
  forgotPassButton.addEventListener("click", async (e) => {
    e.preventDefault();
    const { value: email } = await Swal.fire({
      title: "Enter email address",
      input: "email",
      inputLabel: "Your email address",
      inputPlaceholder: "Enter your email address",
      showCancelButton: true,
      confirmButtonColor: "#164c70",
      color: "#164c70",
      inputValidator: (value) => {
        if (!value) {
          return "Email is required.";
        }
      },
    });
    if (email) {
      showLoadingIndicator();
      await forgotPassword(email);
      hideLoadingIndicator();
    }
  });

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  const forgotPassword = async (email) => {
    try {
      const response = await fetch("backend/api/user.php", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ email: email, forgot_password:true }),
      });

      const data = await response.json();

      if (data.status === "success") {
        sweetAlert("Email sent!", data.message, data.status);
        return;
      }
      sweetAlert(data.status, data.message, data.status);
    } catch (error) {
      sweetAlert("error", "Something went wrong", "error");
    }
  };


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //This function is for Sweet Alert
  function sweetAlert(title = null, text = null, icon = null) {
    Swal.fire({
      title: title,
      text: text,
      icon: icon,
      confirmButtonText: "Ok",
      confirmButtonColor: "#164c70",
    }).then((result) => {
      if (result.isConfirmed && icon === "success") {
        window.location.href = "login";
      }
    });
  }
});


